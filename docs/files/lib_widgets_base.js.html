<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/widgets/base.js - SoysauceJS</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png">SoysauceJS: lib/widgets/base.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.0.0</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Modules</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../modules/soysauce.html">soysauce</a>
                
                </li>
            
        </ul>
    </div>
</div>

<div id="classes" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Classes</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../classes/Carousel.html">Carousel</a></li>
            
                <li><a href="../classes/Widget.html">Widget</a></li>
            
        </ul>
    </div>
</div>










<div id="fileTree" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Files</h2>
    </div>
    <div class="bd">
        <ul><li>lib/<ul><li><a href="../files/lib_head.js.html">head.js</a></li><li>widgets/<ul><li><a href="../files/lib_widgets__carousel.js.html">_carousel.js</a></li><li><a href="../files/lib_widgets_base.js.html">base.js</a></li></ul></li></ul></li></ul>
    </div>
</div>



        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>lib/widgets/base.js</h4>

<pre class="code prettyprint linenums">
/**
 * The base widget.
 *
 * @class Widget
 */
var Widget = function(){};
var widgetCount = 0;

/**
 * Initializes the widget.
 *
 * @method init
 * @param {DOM element | String} element The DOM element or string to initialize.
 * @param {JSON} options A hash of options.
 * @return {Promise} Resolves with itself as the instance.
 */
Widget.prototype.init = function(element, options) {
  var self = this;

  options = options || {};

  if (options.reinit) {
    this.reset();
  }

  this.options = {};
  this.frozen = false;

  if (element) {
    this.$ = $(element);
    this.element = self.$[0];
    this.html = self.element.outerHTML;
  }

  try {
    this.validate();
  }
  catch(e) {
    return soysauce.handleError(e);
  }

  return new Promise(function(resolve) {
    self.id = ++widgetCount;
    self.$.attr(&#x27;data-ss-id&#x27;, self.id);

    if (self.$.attr(&#x27;data-ss-options&#x27;)) {
      var options = self.$.attr(&#x27;data-ss-options&#x27;).split(&#x27; &#x27;);
      var i, l, option;

      for (i = 0, l = options.length; i &lt; l; i++) {
        option = options[i];
        self[option] = true;
      }
    }

    soysauce.widgets.push(self);

    self.initialized = true;
    self.$.attr(&#x27;data-ss-init&#x27;, &#x27;true&#x27;);
    resolve(self);
  });
};

/**
 * Adds the ability to extend the widget. Integrates the &#x60;super()&#x60; method.
 *
 * @method extend
 * @param {JSON Object} properties A hash of properties to override.
 */
Widget.extend = function(properties) {
  var fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;
  var _super = this.prototype;
  var prototype = Object.create(this.prototype); // standard inheritance
  var name;

  prop = properties || {};

  // Set &#x60;_super&#x60; to call the parent&#x27;s method.
  for (name in prop) {
    prototype[name] = typeof prop[name] == &quot;function&quot; &amp;&amp;
    typeof _super[name] == &quot;function&quot; &amp;&amp; fnTest.test(prop[name]) ?
    (function(name, fn) {
      return function() {
        var tmp = this._super;

        this._super = _super[name];

        var ret = fn.apply(this, arguments);
        this._super = tmp;

        return ret;
      };
    })(name, prop[name]) : prop[name];
  }

  function Widget() {
    return this.init.apply(this, arguments);
  }

  Widget.prototype = prototype; // Set subclass to extend super class
  Widget.prototype.constructor = Widget; // Set subclass constructor to itself instead of parent

  Widget.extend = arguments.callee;

  return Widget;
};

/**
 * Determines whether or not the widget supports the given option.
 *
 * @method hasOption
 * @param {String} option
 * @return {Boolean}
 */
Widget.prototype.hasOption = function(option) {
  return this[option] || false;
};

/**
 * Resets the widget to it&#x27;s original state before it was initialized. This
 * will teardown any registered events and be removed from the Soysauce collection
 * of widgets.
 *
 * @method reset
 * @return {Promise}
 */
Widget.prototype.reset = function() {
  var self = this;
  var index = soysauce.widgets.map(function(widget) { return widget.id; }).indexOf(this.id);

  return new Promise(function(resolve, reject) {
    soysauce.widgets.splice(index, 1);
    self.element.outerHTML = self.html;
    resolve();
  });
};

/**
 * Removes itself from the DOM. This also will teardown any registered events
 * and be removed from the Soysauce collection of widgets.
 *
 * @method destroy
 * @return {Promise}
 */
Widget.prototype.destroy = function() {
  var self = this;
  var index = soysauce.widgets.map(function(widget) { return widget.id; }).indexOf(this.id);

  if (this.teardown) {
    this.teardown.call(this);
  }

  return new Promise(function(resolve, reject) {
    soysauce.widgets.splice(index, 1);
    self.$.remove();
    resolve();
  });
};

/**
 * Freezes the widget, stifling any interactions and timers.
 *
 * @method freeze
 * @return {Boolean} New value.
 */
Widget.prototype.freeze = function() {
  this.frozen = true;
  return this.frozen;
};

/**
 * Unfreezes the widget, allowing interactions and reactivating timers.
 *
 * @method unfreeze
 * @return {Boolean} New value.
 */
Widget.prototype.unfreeze = function() {
  this.frozen = false;
  return this.frozen;
};

/**
 * Validates the widget, ensuring syntax and usage of the widget is correct.
 *
 * @method validate
 * @return {ValidationError} Throws error containing debug messages.
 */
Widget.prototype.validate = function() {
  throw new Error(&#x27;Must implement Widget.validate()&#x27;);
};

/**
 * Resizes the widget; called after browser&#x27;s orientation change.
 *
 * @method resize
 */
Widget.prototype.resize = function() {
  // Stub
};

</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
