(function(){function a(c){var d,b=this;this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=10;this.layer=c;if(!c||!c.nodeType){throw new TypeError("Layer must be a document node")}this.onClick=function(){return a.prototype.onClick.apply(b,arguments)};this.onMouse=function(){return a.prototype.onMouse.apply(b,arguments)};this.onTouchStart=function(){return a.prototype.onTouchStart.apply(b,arguments)};this.onTouchEnd=function(){return a.prototype.onTouchEnd.apply(b,arguments)};this.onTouchCancel=function(){return a.prototype.onTouchCancel.apply(b,arguments)};if(a.notNeeded(c)){return}if(this.deviceIsAndroid){c.addEventListener("mouseover",this.onMouse,true);c.addEventListener("mousedown",this.onMouse,true);c.addEventListener("mouseup",this.onMouse,true)}c.addEventListener("click",this.onClick,true);c.addEventListener("touchstart",this.onTouchStart,false);c.addEventListener("touchend",this.onTouchEnd,false);c.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){c.removeEventListener=function(f,h,e){var g=Node.prototype.removeEventListener;if(f==="click"){g.call(c,f,h.hijacked||h,e)}else{g.call(c,f,h,e)}};c.addEventListener=function(g,h,f){var e=Node.prototype.addEventListener;if(g==="click"){e.call(c,g,h.hijacked||(h.hijacked=function(j){if(!j.propagationStopped){h(j)}}),f)}else{e.call(c,g,h,f)}}}if(typeof c.onclick==="function"){d=c.onclick;c.addEventListener("click",function(e){d(e)},false);c.onclick=null}}a.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;a.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);a.prototype.deviceIsIOS4=a.prototype.deviceIsIOS&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);a.prototype.deviceIsIOSWithBadTarget=a.prototype.deviceIsIOS&&(/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);a.prototype.needsClick=function(b){switch(b.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(b.disabled){return true}break;case"input":if((this.deviceIsIOS&&b.type==="file")||b.disabled){return true}break;case"label":case"video":return true}return(/\bneedsclick\b/).test(b.className)};a.prototype.needsFocus=function(b){switch(b.nodeName.toLowerCase()){case"textarea":case"select":return true;case"input":switch(b.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !b.disabled&&!b.readOnly;default:return(/\bneedsfocus\b/).test(b.className)}};a.prototype.sendClick=function(c,d){var b,e;if(document.activeElement&&document.activeElement!==c){document.activeElement.blur()}e=d.changedTouches[0];b=document.createEvent("MouseEvents");b.initMouseEvent("click",true,true,window,1,e.screenX,e.screenY,e.clientX,e.clientY,false,false,false,false,0,null);b.forwardedTouchEvent=true;c.dispatchEvent(b)};a.prototype.focus=function(b){var c;if(this.deviceIsIOS&&b.setSelectionRange){c=b.value.length;b.setSelectionRange(c,c)}else{b.focus()}};a.prototype.updateScrollParent=function(c){var d,b;d=c.fastClickScrollParent;if(!d||!d.contains(c)){b=c;do{if(b.scrollHeight>b.offsetHeight){d=b;c.fastClickScrollParent=b;break}b=b.parentElement}while(b)}if(d){d.fastClickLastScrollTop=d.scrollTop}};a.prototype.getTargetElementFromEventTarget=function(b){if(b.nodeType===Node.TEXT_NODE){return b.parentNode}return b};a.prototype.onTouchStart=function(d){var b,e,c;if(d.targetTouches.length>1){return true}b=this.getTargetElementFromEventTarget(d.target);e=d.targetTouches[0];if(this.deviceIsIOS){c=window.getSelection();if(c.rangeCount&&!c.isCollapsed){return true}if(!this.deviceIsIOS4){if(e.identifier===this.lastTouchIdentifier){d.preventDefault();return false}this.lastTouchIdentifier=e.identifier;this.updateScrollParent(b)}}this.trackingClick=true;this.trackingClickStart=d.timeStamp;this.targetElement=b;this.touchStartX=e.pageX;this.touchStartY=e.pageY;if((d.timeStamp-this.lastClickTime)<200){d.preventDefault()}return true};a.prototype.touchHasMoved=function(b){var d=b.changedTouches[0],c=this.touchBoundary;if(Math.abs(d.pageX-this.touchStartX)>c||Math.abs(d.pageY-this.touchStartY)>c){return true}return false};a.prototype.findControl=function(b){if(b.control!==undefined){return b.control}if(b.htmlFor){return document.getElementById(b.htmlFor)}return b.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};a.prototype.onTouchEnd=function(d){var f,e,c,h,g,b=this.targetElement;if(this.touchHasMoved(d)){this.trackingClick=false;this.targetElement=null}if(!this.trackingClick){return true}if((d.timeStamp-this.lastClickTime)<200){this.cancelNextClick=true;return true}this.lastClickTime=d.timeStamp;e=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(this.deviceIsIOSWithBadTarget){g=d.changedTouches[0];b=document.elementFromPoint(g.pageX-window.pageXOffset,g.pageY-window.pageYOffset)}c=b.tagName.toLowerCase();if(c==="label"){f=this.findControl(b);if(f){this.focus(b);if(this.deviceIsAndroid){return false}b=f}}else{if(this.needsFocus(b)){if((d.timeStamp-e)>100||(this.deviceIsIOS&&window.top!==window&&c==="input")){this.targetElement=null;return false}this.focus(b);if(!this.deviceIsIOS4||c!=="select"){this.targetElement=null;d.preventDefault()}return false}}if(this.deviceIsIOS&&!this.deviceIsIOS4){h=b.fastClickScrollParent;if(h&&h.fastClickLastScrollTop!==h.scrollTop){return true}}if(!this.needsClick(b)){d.preventDefault();this.sendClick(b,d)}return false};a.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};a.prototype.onMouse=function(b){if(!this.targetElement){return true}if(b.forwardedTouchEvent){return true}if(!b.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(b.stopImmediatePropagation){b.stopImmediatePropagation()}else{b.propagationStopped=true}b.stopPropagation();b.preventDefault();return false}return true};a.prototype.onClick=function(b){var c;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(b.target.type==="submit"&&b.detail===0){return true}c=this.onMouse(b);if(!c){this.targetElement=null}return c};a.prototype.destroy=function(){var b=this.layer;if(this.deviceIsAndroid){b.removeEventListener("mouseover",this.onMouse,true);b.removeEventListener("mousedown",this.onMouse,true);b.removeEventListener("mouseup",this.onMouse,true)}b.removeEventListener("click",this.onClick,true);b.removeEventListener("touchstart",this.onTouchStart,false);b.removeEventListener("touchend",this.onTouchEnd,false);b.removeEventListener("touchcancel",this.onTouchCancel,false)};a.notNeeded=function(c){var b;if(typeof window.ontouchstart==="undefined"){return true}if((/Chrome\/[0-9]+/).test(navigator.userAgent)){if(a.prototype.deviceIsAndroid){b=document.querySelector("meta[name=viewport]");if(b&&b.content.indexOf("user-scalable=no")!==-1){return true}}else{return true}}if(c.style.msTouchAction==="none"){return true}return false};a.attach=function(b){return new a(b)};if(typeof define!=="undefined"&&define.amd){define(function(){return a})}else{if(typeof module!=="undefined"&&module.exports){module.exports=a.attach;module.exports.FastClick=a}else{window.FastClick=a}}})();if(!jQuery.fn.find){jQuery.fn.extend({find:function(b){var e,d,c,a=this.length;if(typeof b!=="string"){c=this;return this.pushStack(jQuery(b).filter(function(){for(e=0;e<a;e++){if(jQuery.contains(c[e],this)){return true}}}))}d=[];for(e=0;e<a;e++){jQuery.find(b,this[e],d)}d=this.pushStack(a>1?jQuery.unique(d):d);d.selector=(this.selector?this.selector+" ":"")+b;return d}})}if(!jQuery.fn.on){jQuery.fn.extend({on:function(c,a,f,e,b){var d,g;if(typeof c==="object"){if(typeof a!=="string"){f=f||a;a=undefined}for(d in c){this.on(d,a,f,c[d],b)}return this}if(f==null&&e==null){e=a;f=a=undefined}else{if(e==null){if(typeof a==="string"){e=f;f=undefined}else{e=f;f=a;a=undefined}}}if(e===false){e=returnFalse}else{if(!e){return this}}if(b===1){g=e;e=function(h){jQuery().off(h);return g.apply(this,arguments)};e.guid=g.guid||(g.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,c,e,f,a)})}})}if(!jQuery.fn.one){jQuery.fn.extend({one:function(b,a,d,c){return this.on(b,a,d,c,1)}})}if(!jQuery.fn.off){jQuery.fn.extend({off:function(c,a,e){var b,d;if(c&&c.preventDefault&&c.handleObj){b=c.handleObj;jQuery(c.delegateTarget).off(b.namespace?b.origType+"."+b.namespace:b.origType,b.selector,b.handler);return this}if(typeof c==="object"){for(d in c){this.off(d,a,c[d])}return this}if(a===false||typeof a==="function"){e=a;a=undefined}if(e===false){e=returnFalse}return this.each(function(){jQuery.event.remove(this,c,e,a)})}})}(function(a,b){var c="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(m){var j=this,o=a.isFunction(a.Deferred)?a.Deferred():0,n=a.isFunction(o.notify),f=j.find("img").add(j.filter("img")),g=[],l=[],h=[];if(a.isPlainObject(m)){a.each(m,function(p,q){if(p==="callback"){m=q}else{if(o){o[p](q)}}})}function k(){var p=a(l),q=a(h);if(o){if(h.length){o.reject(f,p,q)}else{o.resolve(f)}}if(a.isFunction(m)){m.call(j,f,p,q)}}function e(p){d(p.target,p.type==="error")}function d(p,q){if(p.src===c||a.inArray(p,g)!==-1){return}g.push(p);if(q){h.push(p)}else{l.push(p)}a.data(p,"imagesLoaded",{isBroken:q,src:p.src});if(n){o.notifyWith(a(p),[q,f,a(l),a(h)])}if(f.length===g.length){setTimeout(k);f.unbind(".imagesLoaded",e)}}if(!f.length){k()}else{f.bind("load.imagesLoaded error.imagesLoaded",e).each(function(p,r){var s=r.src;var q=a.data(r,"imagesLoaded");if(q&&q.src===s){d(r,q.isBroken);return}if(r.complete&&r.naturalWidth!==b){d(r,r.naturalWidth===0||r.naturalHeight===0);return}if(r.readyState||r.complete){r.src=c;r.src=s}})}return o?o.promise(j):j}})(jQuery);if(typeof(soysauce)==="undefined"){"use strict";soysauce={widgets:new Array(),vars:{idCount:0,currentViewportWidth:window.innerWidth,degradeAll:(/Android ([12]|4\.0)|Opera|SAMSUNG-SGH-I747|SCH-I535/.test(navigator.userAgent))?true:false,degrade:(/Android ([12]|4\.0)|Opera|SAMSUNG-SGH-I747/.test(navigator.userAgent))?true:false,degrade2:(/SCH-I535/.test(navigator.userAgent))?true:false,lastResizeTime:0,lastResizeTimerID:0,fastclick:[]},getOptions:function(a){if(!$(a).attr("data-ss-options")){return false}return $(a).attr("data-ss-options").split(" ")},getPrefix:function(){if(navigator.userAgent.match(/webkit/i)!==null){return"-webkit-"}else{if(navigator.userAgent.match(/windows\sphone|msie/i)!==null){return"-ms-"}else{if(navigator.userAgent.match(/^mozilla/i)!==null){return"-moz-"}else{if(navigator.userAgent.match(/opera/i)!==null){return"-o-"}}}}return""},stifle:function(c,a){if(!c){return false}try{c.stopImmediatePropagation()}catch(b){c.propagationStopped=true}if(a){return false}c.preventDefault()},fetch:function(a){var c,b;if(!a){return false}if(typeof(a)==="object"){a=parseInt($(a).attr("data-ss-id"),10)}if(typeof(a)==="string"){var d=parseInt($(a).attr("data-ss-id"),10);if(isNaN(d)){d=parseInt(a,10)}a=d}if(a===+a&&a===(a|0)){c="[data-ss-id='"+a+"']"}else{c=a}soysauce.widgets.forEach(function(e){if(e.id===a){b=e}});if(!b){return false}else{return b}},getCoords:function(a){if(!a){return}if(a.originalEvent!==undefined){a=a.originalEvent}if(a.touches&&a.touches.length===1){return{x:a.touches[0].clientX,y:a.touches[0].clientY}}else{if(a.touches&&a.touches.length===2){return{x:a.touches[0].clientX,y:a.touches[0].clientY,x2:a.touches[1].clientX,y2:a.touches[1].clientY}}else{if(a.changedTouches&&a.changedTouches.length===1){return{x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY}}else{if(a.changedTouches&&a.changedTouches.length===2){return{x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY,x2:a.changedTouches[1].clientX,y2:a.changedTouches[1].clientY}}else{if(a.clientX!==undefined){return{x:a.clientX,y:a.clientY}}}}}}},getArrayFromMatrix:function(a){return a.substr(7,a.length-8).split(", ")},browserInfo:{pageLoad:new Date().getTime(),userAgent:navigator.userAgent,supportsSVG:(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))?true:false,supportsLocalStorage:function(){try{if(localStorage){localStorage.setItem("test",1);localStorage.removeItem("test");return true}else{return false}}catch(a){return false}}(),supportsSessionStorage:function(){try{if(sessionStorage){sessionStorage.setItem("test",1);sessionStorage.removeItem("test");return true}else{return false}}catch(a){return false}}()},scrollTop:function(){window.setTimeout(function(){window.scrollTo(0,1)},0)}};$(window).on("resize orientationchange",function(a){if(a.type==="orientationchange"||window.innerWidth!==soysauce.vars.currentViewportWidth){if(soysauce.vars.lastResizeID){clearTimeout(soysauce.vars.lastResizeID)}soysauce.vars.lastResizeID=window.setTimeout(function(){soysauce.vars.lastResizeTime=a.timeStamp;soysauce.vars.currentViewportWidth=window.innerWidth;soysauce.widgets.forEach(function(b){if(!b.handleResize){return}b.handleResize();if(/carousel/i.test(b.type)){if(b.itemWidth){$(b.widget).trigger("SSWidgetResized")}}else{$(b.widget).trigger("SSWidgetResized")}})},30)}});$(document).ready(function(){soysauce.init();if(soysauce.vars.degradeAll){$("body").attr("data-ss-degrade","true")}soysauce.widgets.forEach(function(b){if(!b.defer){return}var a=0;var c=b.widget.find("[data-ss-widget]");c.each(function(){var d=soysauce.fetch(this);if(d.initialized){if(++a===c.length){$(b.widget).trigger("SSWidgetReady").removeAttr("data-ss-defer");return}}else{d.widget.on("SSWidgetReady",function(){if(++a===c.length){$(b.widget).trigger("SSWidgetReady").removeAttr("data-ss-defer")}})}})});$(window).trigger("SSReady")});$(window).load(function(){var a=soysauce.fetch("[data-ss-widget='lazyloader'][data-ss-options*='cache']");if(a&&a.isCached){return}if(!$(this).scrollTop()){soysauce.scrollTop()}})}soysauce.ajax=function(c,f,b){var a=false;if(soysauce.browserInfo.supportsSessionStorage&&sessionStorage[c]){try{a=JSON.parse(sessionStorage[c]);if(!f){return a}}catch(d){}}$.ajax({url:c,async:(!b)?false:true}).success(function(j,g,h){try{var l=JSON.stringify(j);a=JSON.parse(l);if(!h.getResponseHeader("Cache-Control")){sessionStorage.setItem(c,l)}}catch(k){if(k.code===DOMException.QUOTA_EXCEEDED_ERR){console.warn("Soysauce: sessionStorage is full.")}else{console.warn("Soysauce: error fetching url '"+c+"'. Data returned needs to be JSON.");a=false}}}).fail(function(e){console.warn("Soysauce: error fetching url '"+c+"'. Message: "+e.status+" "+e.statusText)});return a};soysauce.freezeChildren=function(a){var b=$("[data-ss-id='"+a+"']").find("[data-ss-widget]");b.each(function(c,e){var d=$(e).attr("data-ss-id");soysauce.freeze(d,false)})};soysauce.freeze=function(b,a){if(typeof(b)==="object"){b=parseInt($(b).attr("data-ss-id"),10)}a=(!a)?true:false;soysauce.fetch(b).handleFreeze();if(a){soysauce.freezeChildren(b)}};soysauce.unfreeze=function(a){if(typeof(a)==="object"){a=parseInt($(a).attr("data-ss-id"),10)}var b=$("[data-ss-id='"+a+"']").find("[data-ss-widget]");soysauce.fetch(a).handleUnfreeze();b.each(function(c,e){var d=$(e).attr("data-ss-id");soysauce.fetch(d).handleUnfreeze()})};soysauce.init=function(a,d){var f;var c=0;var b=false;var e="";e="[data-ss-widget='toggler'] > [data-ss-component='button']";e+=", [data-ss-widget='carousel'] [data-ss-component='button']";$(e).each(function(){soysauce.vars.fastclick.push(FastClick.attach(this))});if(!a){f=$("[data-ss-widget]:not([data-ss-id]), [data-ss-component='button'][data-ss-toggler-id]")}else{f=$(a)}if((!$(a)&&!f)||$(a).attr("data-ss-id")!==undefined){return b}c=f.length;f.each(function(g){var l=$(this);var j=$(this).attr("data-ss-widget");var k;var h=false;if(!j&&l.attr("data-ss-toggler-id")!==undefined){j="toggler";h=true}if(!d&&/manual/.test(l.attr("data-ss-init"))){return}l.attr("data-ss-id",++soysauce.vars.idCount);switch(j){case"toggler":k=soysauce.togglers.init(this,h);break;case"carousel":k=soysauce.carousels.init(this);break;case"lazyloader":k=soysauce.lazyloader.init(this);break;case"autofill-zip":k=soysauce.autofillZip.init(this);break;case"autodetect-cc":k=soysauce.autodetectCC.init(this);break;case"autosuggest":k=soysauce.autosuggest.init(this);break;case"input-clear":k=soysauce.inputClear.init(this);break}if(k!==undefined){k.type=j;k.id=soysauce.vars.idCount;soysauce.widgets.push(k);b=true;if(l.attr("data-ss-defer")!==undefined){k.defer=true}else{l.imagesLoaded(function(){k.initialized=true;l.trigger("SSWidgetReady")})}}else{l.removeAttr("data-ss-id");--soysauce.vars.idCount}});return b};soysauce.lateload=function(a){function b(c){var d=$(c);var e=d.attr("data-ss-ll-src");if(e){d.attr("src",e).removeAttr("data-ss-ll-src");return true}return false}if(a){return b(a)}else{$(document).on("DOMContentLoaded",function(){$("[data-ss-ll-src][data-ss-options='dom']").each(function(c,d){b(d)})});$(window).on("load",function(){if(!$("[data-ss-ll-src][data-ss-options='load']")){return}$("[data-ss-ll-src][data-ss-options='load']").each(function(c,d){b(d)})})}};soysauce.lateload();soysauce.overlay=(function(){var c,a,b;var e=true;var d=false;return{init:function(f){document.addEventListener("DOMContentLoaded",function(){var g=document.createElement("div");if(!e){return false}g.setAttribute("data-ss-utility","overlay");g.setAttribute("data-ss-state","inactive");document.body.appendChild(g);c=$("[data-ss-utility='overlay']");c.append("<span class='done'></span>");a=c.find(".done");c.append("<div class='caption'></span>");b=c.find(".caption");a.on("click",function(){soysauce.overlay.off()});e=false})},on:function(){if(d){return}c.show();window.setTimeout(function(){c.attr("data-ss-state","active");d=true},0)},off:function(){if(!d){return}c.attr("data-ss-state","inactive");window.setTimeout(function(){c.hide();d=false},400)},toggle:function(){if(d){soysauce.overlay.off()}else{soysauce.overlay.on()}},state:function(){if(d){return"on"}else{return"off"}},caption:function(f){if(!f){b.html("")}else{b.html(f)}}}})();soysauce.overlay.init();soysauce.autodetectCC=(function(){function a(d){var f=soysauce.getOptions(d);var e=this;this.widget=$(this);this.input=$(d);this.prediction;this.result;this.format=false;this.valid=false;if(f){f.forEach(function(g){switch(g){case"format":e.format=(soysauce.vars.degrade2)?false:true;break}})}if(this.format){this.input.attr("maxlength","19")}else{this.input.attr("maxlength","16")}if(this.format&&soysauce.vars.degrade){this.input.on("keydown",function(h){var g=h.keyCode?h.keyCode:h.which;if(g!==8&&g!==46&&g!==91&&g!==17&&g!==189){soysauce.stifle(h);e.input.val(this.value+String.fromCharCode(h.keyCode))}})}this.input.on("keyup change",function(k){var j=k.target.value.replace(/[-\s]+/g,"");var h=k.keyCode?k.keyCode:k.which;var g;if(j.length){if(j.match(/^4/)){e.prediction="visa"}else{if(j.match(/^5/)){e.prediction="mastercard"}else{if(j.match(/^6/)){e.prediction="discover"}else{if(j.match(/^3/)){if(j.length===1){e.prediction="amex dinersclub jcb"}else{if(j.match(/^3(4|7)/)){e.prediction="amex"}else{if(j.match(/^3(0|8)/)){e.prediction="dinersclub"}else{if(j.match(/^35/)){e.prediction="jcb"}}}}}else{e.prediction=undefined}}}}$(k.target).trigger("SSPrediction")}else{$(k.target).trigger("SSEmpty");e.prediction=undefined}if(/visa/.test(e.prediction)&&j.length>=13){if(b(j)){e.valid=(/^4[0-9]{12}(?:[0-9]{3})?$/.test(j))?true:false;g="visa"}else{e.valid=false}}if(/mastercard/.test(e.prediction)&&j.length===16){if(b(j)){e.valid=(j.match(/^5[1-5][0-9]{14}$/))?true:false;g="mastercard"}else{e.valid=false}}if(/amex/.test(e.prediction)&&j.length>=15){if(b(j)){e.valid=(j.match(/^3[47][0-9]{13}$/))?true:false;g="amex"}else{e.valid=false}}if(/dinersclub/.test(e.prediction)&&j.length>=14){if(b(j)){e.valid=(j.match(/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/))?true:false;g="dinersclub"}else{e.valid=false}}if(/discover/.test(e.prediction)&&j.length===16){if(b(j)){e.valid=(j.match(/^6(?:011|5[0-9]{2})[0-9]{12}$/))?true:false;g="discover"}else{e.valid=false}}if(/jcb/.test(e.prediction)&&j.length===16){if(b(j)){e.valid=(j.match(/^(?:2131|1800|35\d{3})\d{11}$/))?true:false;g="jcb"}else{e.valid=false}}if(e.valid&&g){e.result=g;$(k.target).trigger("SSResult")}else{e.result=undefined;if(!e.prediction&&j.length===16||/visa/.test(e.prediction)&&j.length===13||/visa|mastercard|discover|dinersclub|jcb/.test(e.prediction)&&j.length===16||/amex/.test(e.prediction)&&j.length===15){$(k.target).trigger("SSResult")}}if(e.format&&j.length>3&&h!==8&&h!==46&&h!==91&&h!==17&&h!==189){e.formatInput(k)}})}a.prototype.formatInput=function(h){var j=this.input.val().replace(/[\s]+/g,"");var d=(/^3[47]/.test(j.replace(/[-\s]+/g,"")))?true:false;var g=(/^3(?:0[0-5]|[68][0-9])/.test(j.replace(/[-\s]+/g,""))&&!d)?true:false;if(soysauce.vars.degrade){c(this.input[0])}if(d||g){if(j[4]!==undefined&&j[4]!=="-"){j=f("-",4,j);this.input.val(j)}if(j[11]!==undefined&&j[11]!=="-"){j=f("-",11,j);this.input.val(j)}}else{if(j[4]!==undefined&&j[4]!=="-"){j=f("-",4,j);this.input.val(j)}if(j[9]!==undefined&&j[9]!=="-"){j=f("-",9,j);this.input.val(j)}if(j[14]!==undefined&&j[14]!=="-"){j=f("-",14,j);this.input.val(j)}}function f(l,k,e){if(k>0){return e.substring(0,k)+l+e.substring(k,e.length)}else{return l+e}}};function c(d){var e=d.length;d.setSelectionRange(19,19)}function b(g,f,k,j,h){for(j=+g[f=g.length-1],h=0;f--;){k=+g[f],j+=++h%2?2*k%10+(k>4):k}return !(j%10)}return{init:function(d){return new a(d)}}})();soysauce.autofillZip=(function(){var c="//jeocoder.herokuapp.com/zips/";var a="//www.mapquestapi.com/geocoding/v1/reverse?key=Fmjtd%7Cluub2l6tnu%2Ca5%3Do5-96tw0f";function b(d){var f=soysauce.getOptions(d);var e=this;this.widget=$(d);this.zip=this.widget.find("[data-ss-component='zip']");this.city=this.widget.find("[data-ss-component='city']");this.state=this.widget.find("[data-ss-component='state']");this.lastRequestedData;this.freeze=false;this.reverse=false;this.reverseGeocodeButton=this.widget.find("[data-ss-component='reverse-geocode']");if(f){f.forEach(function(g){switch(g){case"reverse":e.reverse=true;break}})}if(this.reverse){this.reverseGeocodeButton.on("click",function(){e.reverseGeocode()})}else{this.zip.on("keyup change",function(){e.getLocationData()})}}b.prototype.reverseGeocode=function(){var d=this;if(!navigator.geolocation||this.freeze){return}d.widget.trigger("SSDataFetch");navigator.geolocation.getCurrentPosition(function(e){var f=a+"&lat="+e.coords.latitude+"&lng="+e.coords.longitude+"&callback=soysauce.fetch("+d.id+").setLocationData";$("body").append("<script src='"+f+"'><\/script>")})};b.prototype.setLocationData=function(f){var d=this;var g=f.city;var e=f.state;if(this.freeze){return}this.lastRequestedData=f;this.widget.trigger("SSDataReady");if(this.reverse){this.zip.val(f.results[0].locations[0].postalCode)}else{this.city.val(g);this.state.val(e)}};b.prototype.getLocationData=function(){var d=this;var e=this.zip[0].value;if(this.freeze){return}if((e.length===5)&&(parseFloat(e,10)==parseInt(e,10))&&!isNaN(e)){this.widget.trigger("SSDataFetch");$.ajax({dataType:"json",url:c+e,success:function(f){d.setLocationData(f)},error:function(){d.widget.trigger("SSDataError");console.warn("Soysauce: Could not fetch zip code "+e)}})}};b.prototype.handleFreeze=function(){this.freeze=true};b.prototype.handleUnfreeze=function(){this.freeze=false};return{init:function(d){return new b(d)}}})();soysauce.autosuggest=(function(){function a(b){var d=soysauce.getOptions(b);var c=this;this.widget=$(b);this.input=$(b);if(d){d.forEach(function(f){switch(f){case"option1":break}})}var e={url:undefined,data:undefined,minCharacters:1,maxResults:10,wildCard:"",caseSensitive:false,notCharacter:"!",maxHeight:350,highlightMatches:true,onSelect:undefined,width:undefined,property:"text"};this.acSettings=e;this.obj=$(b);this.wildCardPatt=new RegExp(c.regexEscape(this.acSettings.wildCard||""),"g");this.results=$("<ul />");this.currentSelection=undefined;this.pageX=undefined;this.pageY=undefined;this.getJSONTimeout=0;$(this.results).addClass("jsonSuggest ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all").attr("role","listbox").css({xtop:(this.obj.position().top+this.obj.outerHeight())+"px",xleft:this.obj.position().left+"px",width:this.acSettings.width||(this.obj.outerWidth()+"px"),"z-index":1000000,position:"absolute","background-color":"black"}).hide();this.obj.after(this.results).keyup(function(f){switch(f.keyCode){case 13:$(c.currentSelection).trigger("click");return false;case 40:if(typeof c.currentSelection==="undefined"){c.currentSelection=$("li:first",c.results).get(0)}else{c.currentSelection=$(c.currentSelection).next().get(0)}c.setHoverClass(c.currentSelection);if(c.currentSelection){$(c.results).scrollTop(c.currentSelection.offsetTop)}return false;case 38:if(typeof c.currentSelection==="undefined"){c.currentSelection=$("li:last",c.results).get(0)}else{c.currentSelection=$(c.currentSelection).prev().get(0)}c.setHoverClass(c.currentSelection);if(c.currentSelection){$(c.results).scrollTop(c.currentSelection.offsetTop)}return false;default:c.runSuggest.apply(this,[f,c])}}).keydown(function(f){if((f.keyCode===9||f.keyCode===13)&&c.currentSelection){$(c.currentSelection).trigger("click");return true}}).blur(function(g){var f=$(c.results).offset();f.bottom=f.top+$(c.results).height();f.right=f.left+$(c.results).width();if(pageY<f.top||pageY>f.bottom||pageX<f.left||pageX>f.right){$(c.results).hide()}}).focus(function(f){$(this.results).css({top:(c.obj.position().top+c.obj.outerHeight())+"px",left:c.obj.position().left+"px"});if($("li",c.results).length>0){$(c.results).show()}}).attr("autocomplete","off");$(window).mousemove(function(f){this.pageX=f.pageX;this.pageY=f.pageY});this.acSettings.notCharacter=c.regexEscape(this.acSettings.notCharacter||"");if(this.widget.attr("data-ss-suggest-json-file")){$.ajax({url:this.widget.attr("data-ss-suggest-json-file"),dataType:"json",async:false,success:function(f){c.acSettings.data=f}})}if(this.acSettings.data&&typeof this.acSettings.data==="string"){this.acSettings.data=$.parseJSON(this.acSettings.data)}$(this.obj).trigger("SSLoaded")}a.prototype.handleResize=function(){};a.prototype.regexEscape=function(b,f){var c=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];if(f){for(var e=0;e<c.length;e++){if(c[e]===f){c.splice(e,1)}}}var d=new RegExp("(\\"+c.join("|\\")+")","g");return b.replace(d,"\\$1")};a.prototype.selectResultItem=function(b){this.obj.val(b[this.acSettings.property]);this.widget.trigger("SSAutoSuggested",{suggestion:b});$(this.results).html("").hide();if(typeof this.acSettings.onSelect==="function"){this.acSettings.onSelect(b)}};a.prototype.setHoverClass=function(b){$("li a",this.results).removeClass("ui-state-hover");if(b){$("a",b).addClass("ui-state-hover")}this.currentSelection=b};a.prototype.buildResults=function(b,c){c="("+c+")";var g=this;var e=true,d,k=0,f=this.acSettings.caseSensitive?new RegExp(c,"g"):new RegExp(c,"ig");$(this.results).html("").hide();for(d=0;d<b.length;d+=1){var j=$("<li />"),h=b[d][this.acSettings.property];if(this.acSettings.highlightMatches===true){h=h.replace(f,"<strong>$1</strong>")}$(j).append('<a class="ui-corner-all">'+h+"</a>");if(typeof b[d].image==="string"){$(">a",j).prepend('<img src="'+b[d].image+'" />')}if(typeof b[d].extra==="string"){$(">a",j).append("<small>"+b[d].extra+"</small>")}$(j).addClass("ui-menu-item").addClass((e)?"odd":"even").attr("role","menuitem").click((function(l){return function(){g.selectResultItem(b[l])}})(d)).mouseover((function(l){return function(){g.setHoverClass(l)}})(j));$(this.results).append(j);e=!e;k+=1;if(typeof this.acSettings.maxResults==="number"&&k>=this.acSettings.maxResults){break}}if($("li",this.results).length>0){this.currentSelection=undefined;$(this.results).show().css("height","auto");if($(this.results).height()>this.acSettings.maxHeight){$(this.results).css({overflow:"auto",height:this.acSettings.maxHeight+"px"})}}};a.prototype.runSuggest=function(d,b){var c=function(j){if(this.value.length<b.acSettings.minCharacters){b.clearAndHideResults();return false}var k=[],g=(!b.acSettings.wildCard)?b.regexEscape(this.value):b.regexEscape(this.value,b.acSettings.wildCard).replace(wildCardPatt,".*"),e=true,l,h;if(b.acSettings.notCharacter&&g.indexOf(b.acSettings.notCharacter)===0){g=g.substr(b.acSettings.notCharacter.length,g.length);if(g.length>0){e=false}}g=g||".*";g=b.acSettings.wildCard?"^"+g:g;l=b.acSettings.caseSensitive?new RegExp(g):new RegExp(g,"i");for(h=0;h<j.length;h+=1){if(l.test(j[h][b.acSettings.property])===e){k.push(j[h])}}b.buildResults(k,g)};if(b.acSettings.data&&b.acSettings.data.length){c.apply(this,[b.acSettings.data,b])}else{if(b.acSettings.url&&typeof b.acSettings.url==="string"){var f=this.value;if(f.length<b.acSettings.minCharacters){b.clearAndHideResults();return false}$(b.results).html('<li class="ui-menu-item ajaxSearching"><a class="ui-corner-all">Searching...</a></li>').show().css("height","auto");b.getJSONTimeout=window.clearTimeout(b.getJSONTimeout);b.getJSONTimeout=window.setTimeout(function(){$.getJSON(b.acSettings.url,{search:f},function(e){if(e){b.buildResults(e,f)}else{b.clearAndHideResults()}})},500)}}};a.prototype.clearAndHideResults=function(){$(this.results).html("").hide()};return{init:function(b){return new a(b)}}})();soysauce.carousels=(function(){var b=5000;var c=2;var j=20;var k="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";var h=1500;var d=soysauce.getPrefix();function g(p){var w;var v=this;var l;var s="";var n;var o;this.widget=$(p);this.index=0;this.maxIndex;this.container;this.items;this.itemPadding;this.dots;this.numChildren=0;this.widgetWidth=0;this.widgetHeight=0;this.itemWidth=0;this.offset=0;this.ready=false;this.interrupted=false;this.links=false;this.lockScroll=undefined;this.nextBtn;this.prevBtn;this.freeze=false;this.jumping=false;this.lastTransitionEnd=0;this.infinite=true;this.autoscroll=false;this.autoscrollID;this.autoscrollInterval;this.autoscrollRestartID;this.infiniteID;this.forward;this.lastSlideTime;this.cloneDepth=0;this.looping=false;this.rewindCoord=0;this.fullscreen=true;this.peek=false;this.peekWidth=0;this.peekAlign;this.swipe=true;this.coords1x=0;this.coords1y=0;this.cms=false;this.zoom=false;this.zoomMin;this.zoomMax;this.isZooming=false;this.isZoomed=false;this.panMax={x:0,y:0};this.panCoords={x:0,y:0};this.panCoordsStart={x:0,y:0};this.panning=false;this.zoomIcon;this.pinch=false;this.scale;this.thumbs=false;this.multi=false;this.multiVars={numItems:2,stepSize:1,minWidth:0,even:false};this.autoheight=false;this.fade=false;if(this.widget.attr("data-ss-single-options")&&this.widget.find("[data-ss-component='item']").length===1){w=this.widget.attr("data-ss-single-options").split(" ")}else{w=soysauce.getOptions(p)}if(w){w.forEach(function(x){switch(x){case"cms":v.cms=true;break;case"peek":v.peek=true;break;case"finite":v.infinite=false;break;case"autoscroll":v.autoscroll=true;break;case"nofullscreen":v.fullscreen=false;break;case"noswipe":v.swipe=false;break;case"zoom":v.zoom=true;break;case"pinch":v.pinch=true;break;case"thumbs":v.thumbs=true;break;case"multi":v.multi=true;break;case"autoheight":v.autoheight=true;break;case"fade":v.fade=true;break}})}if(this.cms){var r="";this.widget.find("style").each(function(z){var x=$(this);var y="";r=x.html().match(/\/\/[\w_\.\/-]+-2x[\w\.\/]+/i)[0];y="<img src='"+r+"'>";x.before(y);x.closest("li").attr("data-ss-component","item");x.find("+ *").remove();x.remove()})}if(this.swipe){this.widget.find("a").click(function(x){soysauce.stifle(x)})}this.widgetWidth=this.widget.outerWidth();this.widget.wrapInner("<div data-ss-component='container' />");this.widget.wrapInner("<div data-ss-component='container_wrapper' />");this.container=this.widget.find("[data-ss-component='container']");l=this.widget.find("[data-ss-component='container_wrapper']");if(this.zoom){l.after("<div data-ss-component='zoom_icon' data-ss-state='out'></div>");this.zoomIcon=l.find("~ [data-ss-component='zoom_icon']");this.zoomMin=parseFloat(this.widget.attr("data-ss-zoom-min"))||1.2;this.zoomMax=parseFloat(this.widget.attr("data-ss-zoom-max"))||4;this.scale=c;if(this.zoomMin<1.2){this.zoomMin=1.2}if(this.zoomMin>this.zoomMax){console.warn("Soysauce: zoomMin is greater than zoomMax, errors may occur.")}}if(this.infinite){l.after("<div data-ss-component='button' data-ss-button-type='prev' data-ss-state='enabled'></div><div data-ss-component='button' data-ss-button-type='next'></div>")}else{l.after("<div data-ss-component='button' data-ss-button-type='prev' data-ss-state='disabled'></div><div data-ss-component='button' data-ss-button-type='next'></div>")}l.after("<div data-ss-component='dots'></div>");this.dots=this.widget.find("[data-ss-component='dots']");this.nextBtn=l.find("~ [data-ss-button-type='next']");this.prevBtn=l.find("~ [data-ss-button-type='prev']");l.find("~ [data-ss-button-type='prev']").click(function(x){soysauce.stifle(x);if(v.ready&&!v.interrupted&&!v.freeze){v.slideBackward()}});l.find("~ [data-ss-button-type='next']").click(function(x){soysauce.stifle(x);if(v.ready&&!v.interrupted&&!v.freeze){v.slideForward()}});this.maxIndex=this.widget.find("[data-ss-component='item']").length;if(this.multi){this.multiVars.numItems=parseInt(this.widget.attr("data-ss-multi-set"),10)||2;this.multiVars.minWidth=parseInt(this.widget.attr("data-ss-multi-min-width"),10)||0;this.multiVars.stepSize=parseInt(this.widget.attr("data-ss-step-size"),10)||this.multiVars.numItems;this.maxIndex=Math.ceil(this.maxIndex/this.multiVars.stepSize)}if(this.infinite){if(this.multi){console.warn("Soysauce: 'multi' option with infinite scrolling not yet supported. Please add 'finite' option.");a(this,1)}else{a(this,1)}this.lastSlideTime=new Date().getTime()}this.items=this.widget.find("[data-ss-component='item']");this.itemPadding=parseInt(this.items.first().css("padding-left"),10)+parseInt(this.items.first().css("padding-right"),10);if(this.multi){this.multiVars.even=(this.items.length%this.multiVars.numItems===0)?true:false}if(!this.items.length){console.warn("Soysauce: Carousel cannot be instantiated; no items found.");return}this.numChildren=this.items.length;if(!this.infinite){l.find("~ [data-ss-button-type='next']").attr("data-ss-state",(this.numChildren>1)?"enabled":"disabled")}else{l.find("~ [data-ss-button-type='next']").attr("data-ss-state","enabled")}this.links=(!this.items[0].tagName.match(/^a$/i)&&!this.items.find("a[href]").length)?false:true;if(this.thumbs){var t=0;if(this.container.find("[data-ss-component='thumbnail']").length>0){return}this.items.each(function(x,y){var z=(/img/i.test(y.tagName))?$(this).attr("src"):$(this).find("img").attr("src");++t;if(v.infinite&&(t===1||t===v.numChildren)){return}v.container.append("<img data-ss-component='thumbnail' src='"+z+"'>")})}n=(this.infinite)?this.numChildren-2:this.numChildren;n=(this.multi)?this.maxIndex:n;o=this.container.find("[data-ss-component='thumbnail']");if(o.length>0){o.each(function(x,y){s+="<div data-ss-component='dot'>"+y.outerHTML+"</div>";$(this).remove()})}else{for(i=0;i<n;i++){s+="<div data-ss-component='dot'></div>"}}this.dots.html(s);this.dots=this.dots.find("div");this.dots.attr("data-ss-state","inactive");this.dots.first().attr("data-ss-state","active");this.dots.on("click",function(z){var y=parseInt(soysauce.getArrayFromMatrix(v.container.css(d+"transform"))[4],10);var x=0;if(y===v.offset){v.ready=true}if(!v.ready||v.interrupted||v.freeze){return}soysauce.stifle(z);x=v.dots.index(this);if(v.infinite){x+=1}v.jumpTo(x)});if(this.peek){this.peekAlign=this.widget.attr("data-ss-peek-align")||"center";this.peekWidth=parseInt(this.widget.attr("data-ss-peek-width"),10)||j;if(this.peekWidth%2){this.widget.attr("data-ss-peek-width",++this.peekWidth)}}this.items.attr("data-ss-state","inactive");if(this.infinite){$(this.items[1]).attr("data-ss-state","active");this.index++}else{if(this.multi){var q=$(this.items.slice(0,this.multiVars.numItems));q.attr("data-ss-state","active")}else{$(this.items[0]).attr("data-ss-state","active")}}this.container.imagesLoaded(function(x){var z=v.items.first();var y=parseInt(z.css("margin-left"),10)+parseInt(z.css("margin-right"),10);if(v.multi){if(v.multiVars.minWidth>0){v.multiVars.numItems=Math.floor(v.widgetWidth/v.multiVars.minWidth)}v.itemWidth=v.widgetWidth/v.multiVars.numItems}else{v.itemWidth=v.widgetWidth}if(v.peek){v.itemWidth-=v.peekWidth*2;switch(v.peekAlign){case"center":v.offset+=v.peekWidth;break;case"left":break;case"right":v.offset+=(v.peekWidth*2);break}}if(!v.fade){v.container.width((v.itemWidth+y)*v.numChildren);v.items.css("width",v.itemWidth+"px")}if(v.infinite){v.offset-=v.itemWidth}v.container.attr("data-ss-state","notransition");e(v.container[0],v.offset);v.widgetHeight=v.widget.outerHeight(true);if(v.zoom){v.initPanLimits()}});if(this.swipe||this.zoom){this.widget.on("touchstart mousedown",function(z){var y=$(z.target).attr("data-ss-component");if(/^(zoom_icon|dot|thumbnail)$/.test(y)&&v.interrupted){var x=(soysauce.vars.degrade)?parseInt(v.container[0].style.left,10):parseInt(soysauce.getArrayFromMatrix(v.container.css(d+"transform"))[4],10);if(x===v.offset){v.interrupted=false}}if(v.jumping||v.freeze||/^(button|dot|dots|thumbnail)$/.test(y)){return}v.handleSwipe(z)})}this.container.on(k,function(x){if(Math.abs(x.timeStamp-v.lastTransitionEnd)<300){return}v.lastTransitionEnd=x.timeStamp;v.widget.trigger("slideEnd");v.ready=true;v.jumping=false;v.interrupted=false;v.container.attr("data-ss-state","ready");v.widget.attr("data-ss-state","ready");if(v.autoscroll&&v.autoscrollRestartID===undefined){v.autoscrollRestartID=window.setTimeout(function(){v.autoscrollOn()},1000)}if(v.autoheight){v.widget.css("height",$(v.items[v.index]).outerHeight(true))}});if(this.autoscroll){var m=this.widget.attr("data-ss-autoscroll-interval");this.autoscrollInterval=(!m)?b:parseInt(m,10);this.autoscrollOn()}if(this.autoheight){var u=$(this.items[this.index]).outerHeight(true);this.widget.css("min-height",u)}this.widget.one("SSWidgetReady",function(){v.widget.attr("data-ss-state","ready");v.ready=true;window.setTimeout(function(){v.container.attr("data-ss-state","ready")},0);if(v.autoheight){var x=$(v.items[v.index]).outerHeight(true);v.widget.css("height",x);window.setTimeout(function(){v.widget.css("min-height","0px")},300)}})}g.prototype.gotoPos=function(l,p,m,q){var o=this;this.offset=l;e(this.container[0],l);if(this.ready){this.container.attr("data-ss-state","ready");this.widget.attr("data-ss-state","ready")}else{this.container.attr("data-ss-state",(p)?"intransit-fast":"intransit");this.widget.attr("data-ss-state","intransit")}if(o.autoscroll){o.autoscrollOff();if(o.autoscrollRestartID!==undefined){window.clearInterval(o.autoscrollRestartID);o.autoscrollRestartID=undefined}}if(this.infinite){var r=0,n=0;r=parseFloat(this.container.css(d+"transition-duration").replace(/s$/,""))*1000;r=(!r)?650:r;if(!q&&!m&&this.index===this.numChildren-2&&!this.forward){this.infiniteID=window.setTimeout(function(){n=(soysauce.vars.degrade)?o.rewindCoord:parseInt(soysauce.getArrayFromMatrix(o.container.css(d+"transform"))[4],10);o.container.attr("data-ss-state","notransition");o.offset=n-o.itemWidth*(o.numChildren-2);e(o.container[0],o.offset);window.setTimeout(function(){o.container.attr("data-ss-state","intransit");if(o.peek&&/left/.test(o.peekAlign)){o.offset=-o.index*o.itemWidth}else{o.offset=-o.index*o.itemWidth+o.peekWidth}e(o.container[0],o.offset)},0)},0)}else{if(!q&&!m&&this.index===1&&this.forward){this.infiniteID=window.setTimeout(function(){n=(soysauce.vars.degrade)?o.rewindCoord:parseInt(soysauce.getArrayFromMatrix(o.container.css(d+"transform"))[4],10);o.container.attr("data-ss-state","notransition");o.offset=o.itemWidth*(o.numChildren-2)+n;e(o.container[0],o.offset);window.setTimeout(function(){o.container.attr("data-ss-state","intransit");if(o.peek&&/left/.test(o.peekAlign)){o.offset=-o.itemWidth}else{o.offset=-o.itemWidth+o.peekWidth}e(o.container[0],o.offset)},0)},0)}else{this.infiniteID=undefined}}}};g.prototype.slideForward=function(n){var o=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]),m=this.numChildren-1,l=(this.multi)?this.multiVars.stepSize*this.itemWidth:this.itemWidth;if(!this.ready||this.isZooming||(!this.infinite&&this.index===m)||(!this.infinite&&this.multi&&this.index===this.maxIndex-1)){return false}o.attr("data-ss-state","inactive");if(this.multi){var p=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems));p.attr("data-ss-state","inactive");this.index++}else{$(this.items[this.index++]).attr("data-ss-state","inactive")}if(this.infinite&&this.index===m){$(this.items[1]).attr("data-ss-state","active");this.index=1}else{if(this.multi){var p;if(!this.multiVars.even&&this.index===this.maxIndex-1){p=$(this.items.slice(this.items.length-this.multiVars.stepSize,this.items.length))}else{p=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems))}p.attr("data-ss-state","active")}else{$(this.items[this.index]).attr("data-ss-state","active")}}o=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]);o.attr("data-ss-state","active");if(!this.infinite){if(this.index===m||(this.multi&&this.index===this.maxIndex-1)){this.nextBtn.attr("data-ss-state","disabled")}if(this.numChildren>1){this.prevBtn.attr("data-ss-state","enabled")}}this.ready=false;this.forward=true;if(this.multi&&!this.multiVars.even&&this.index===this.maxIndex-1){l-=(this.multiVars.stepSize-(this.items.length%this.multiVars.stepSize))*this.itemWidth}this.gotoPos(this.offset-l,n);return true};g.prototype.slideBackward=function(n){var o=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]),m=this.numChildren-1,l=(this.multi)?this.multiVars.stepSize*this.itemWidth:this.itemWidth;if(!this.ready||(!this.infinite&&this.index===0)||this.isZooming){return false}o.attr("data-ss-state","inactive");if(this.multi){var p=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems));p.attr("data-ss-state","inactive");this.index--}else{$(this.items[this.index--]).attr("data-ss-state","inactive")}if(this.infinite&&this.index===0){$(this.items[m-1]).attr("data-ss-state","active");this.index=m-1}else{if(this.multi){var p=$(this.items.slice(this.index*this.multiVars.stepSize,this.index*this.multiVars.stepSize+this.multiVars.numItems));p.attr("data-ss-state","active")}else{$(this.items[this.index]).attr("data-ss-state","active")}}o=(this.infinite)?$(this.dots[this.index-1]):$(this.dots[this.index]);o.attr("data-ss-state","active");if(!this.infinite){if(this.index===0){this.prevBtn.attr("data-ss-state","disabled")}if(this.numChildren>1){this.nextBtn.attr("data-ss-state","enabled")}}this.ready=false;this.forward=false;if(this.multi&&!this.multiVars.even&&this.index===0){this.gotoPos(0+this.peekWidth,n)}else{this.gotoPos(this.offset+l,n)}return true};g.prototype.initPanLimits=function(){var l=this,m=2;this.panMax.y=Math.abs(((l.items.first().height()*l.scale)-l.widgetHeight)/c);this.panMax.x=Math.abs((l.widgetWidth-((l.itemWidth*l.scale)-(l.itemPadding*2)))/c);if(this.panMax.y===0){this.container.imagesLoaded(function(){l.panMax.y=Math.abs(((l.items.first().height()*l.scale)-l.widgetHeight)/c)})}};g.prototype.handleResize=function(){var n;this.widgetWidth=this.widget.outerWidth();if(!this.widgetWidth){n=this.widget.parents().closest("[data-ss-widget='toggler'] [data-ss-component='content']")}if(n){n.css("display","block");this.widgetWidth=this.widgetWidth||n.outerWidth()}if(this.fade){return}if(this.multi){if(this.multiVars.minWidth){this.multiVars.numItems=Math.floor(this.widgetWidth/this.multiVars.minWidth)}this.itemWidth=this.widgetWidth/this.multiVars.numItems}if(this.fullscreen){var m;var l=this.container.attr("data-ss-state");if(this.multi){m=this.widgetWidth-(this.itemWidth*this.multiVars.numItems)}else{m=this.widgetWidth-this.itemWidth}if(this.peek){this.itemWidth-=this.peekWidth*2;this.checkPanLimits()}this.itemWidth+=m;if(this.peek&&/left/.test(this.peekAlign)){this.offset=-this.index*this.itemWidth}else{this.offset=-this.index*this.itemWidth+this.peekWidth}this.container.attr("data-ss-state","notransition");this.widget.attr("data-ss-state","intransit");this.items.css("width",this.itemWidth+"px");e(this.container[0],this.offset)}this.container.css("width",(this.itemWidth*this.numChildren)+"px");if(this.autoheight){this.widget.css("height",$(this.items[this.index]).outerHeight(true))}};g.prototype.handleInterrupt=function(p){if(this.isZooming||this.isZoomed||!this.swipe){soysauce.stifle(p);return}var n=this;var l,q,o;var m=(soysauce.vars.degrade)?parseInt(n.container[0].style.left,10):parseInt(soysauce.getArrayFromMatrix(this.container.css(d+"transform"))[4],10);this.interrupted=true;if(this.autoscroll){this.autoscrollOff();if(this.autoscrollRestartID!==undefined){window.clearInterval(n.autoscrollRestartID);n.autoscrollRestartID=undefined}}n.container.attr("data-ss-state","notransition");n.widget.attr("data-ss-state","intransit");if((this.infinite&&this.index===1&&this.forward)||(this.infinite&&(this.index===this.numChildren-2)&&!this.forward)){this.looping=true}else{this.looping=false}window.clearInterval(this.infiniteID);e(this.container[0],m);l=soysauce.getCoords(p);this.widget.on("touchmove mousemove",function(s){var r;if(n.isZoomed){soysauce.stifle(p);soysauce.stifle(s);return}o=q=soysauce.getCoords(s);if(!n.lockScroll){if(Math.abs((l.y-q.y)/(l.x-q.x))>1.2){n.lockScroll="y"}else{n.lockScroll="x"}}if(/^y$/.test(n.lockScroll)){return}soysauce.stifle(s);r=l.x-q.x;e(n.container[0],m-r)});if(this.infiniteID!==undefined){this.widget.one("touchend mouseup",function(r){n.infiniteID=undefined;if(n.index===n.numChildren-2){if(n.peek&&/left/.test(n.peekAlign)){n.offset=-n.index*n.itemWidth}else{n.offset=-n.index*n.itemWidth+n.peekWidth}}else{if(n.index===1){if(n.peek&&/left/.test(n.peekAlign)){n.offset=-n.itemWidth}else{n.offset=-n.itemWidth+n.peekWidth}}}window.setTimeout(function(){n.container.attr("data-ss-state","intransit");e(n.container[0],n.offset)},0)})}return o};g.prototype.handleSwipe=function(s){var x=this;var y,w,m,o=0,q=-1;var n=0,u=0;var t=null;if(this.infinite){if(new Date().getTime()-this.lastSlideTime<225){return}this.lastSlideTime=new Date().getTime()}y=soysauce.getCoords(s);this.coords1x=y.x;this.coords1y=y.y;if(y.y2&&y.x2){var p=0,v=0,r=0;v=(y.y2-y.y)*(y.y2-y.y);p=(y.x2-y.x)*(y.x2-y.x);o=Math.sqrt(v+p)}if(s.type.match(/mousedown/)!==null){soysauce.stifle(s)}this.lockScroll=undefined;if(!this.ready){m=this.handleInterrupt(s)}else{if(this.zoom&&this.isZoomed){var l=x.scale;this.widget.one("touchend mouseup",function(F){var D=soysauce.getArrayFromMatrix($(F.target).css(d+"transform")),H=parseInt(D[4],10),G=parseInt(D[5],10),A=$(F.target),I=$(F.target).attr("data-ss-button-type"),E=$(F.target).attr("data-ss-component"),B=$(x.items[x.index]).find("img"),z=F.originalEvent;if(/^(prev|next)$/.test(I)||/^(dots|zoom_icon)$/.test(E)){return}x.panCoordsStart.x=(Math.abs(H)>0)?H:0;x.panCoordsStart.y=(Math.abs(G)>0)?G:0;t=null;B.attr("data-ss-state","ready");if(x.pinch&&z.changedTouches&&z.changedTouches.length>1){var C=l+z.scale-1;if(C>x.zoomMax){x.scale=x.zoomMax}else{if(C<x.zoomMin){x.scale=x.zoomMin}else{x.scale+=z.scale-1}}}x.widget.off("touchmove mousemove")});this.widget.on("touchmove mousemove",function(E){var C=E.originalEvent,A=x.items[x.index],z=$(E.target).attr("data-ss-button-type"),B=$(E.target).attr("data-ss-component");soysauce.stifle(E);if(/^(prev|next)$/.test(z)||/^(dots|zoom_icon)$/.test(B)){return}A=(!/img/i.test(A.tagName))?$(A).find("img")[0]:A;w=soysauce.getCoords(E);$(A).attr("data-ss-state","panning");if(x.pinch&&C.changedTouches.length>1){var D=soysauce.getCoords(C);var F=l+C.scale-1;x.initPanLimits();if(F>=x.zoomMin&&F<=x.zoomMax){f(A,F,x.panCoordsStart.x,x.panCoordsStart.y)}}else{x.panCoords.x=x.panCoordsStart.x+w.x-x.coords1x;x.panCoords.y=x.panCoordsStart.y+w.y-x.coords1y;x.checkPanLimits();f(E.target,x.scale,x.panCoords.x,x.panCoords.y)}})}else{if(this.swipe){this.widget.on("touchmove mousemove",function(B){var z,A=$(B.target).attr("data-ss-component");w=soysauce.getCoords(B);if(/^zoom_icon$/.test(A)){return}if(!x.lockScroll){if(Math.abs((y.y-w.y)/(y.x-w.x))>=1){x.lockScroll="y"}else{x.lockScroll="x"}}if(/^y$/.test(x.lockScroll)){return}soysauce.stifle(B);x.panning=true;m=w.x;z=y.x-w.x;x.container.attr("data-ss-state","notransition");x.widget.attr("data-ss-state","intransit");e(x.container[0],x.offset-z)})}}}this.widget.one("touchend mouseup",function(G){var E;var D=$(G.target).attr("data-ss-component");x.widget.off("touchmove mousemove");if(x.jumping){return}soysauce.stifle(G);if(/^button$/.test(D)){return}E=(/^zoom_icon$/.test(D))?true:false;w=soysauce.getCoords(G);if(w!==null){m=w.x}var z=x.coords1x-m;var C=x.coords1y-w.y;var F=Math.abs(G.timeStamp-s.timeStamp);var B=z/F;var A=(B>0.9)?true:false;if(!x.interrupted&&x.links&&Math.abs(z)===0){x.ready=true;x.container.attr("data-ss-state","ready");if(G.target.tagName.match(/^a$/i)!==null){window.location.href=$(G.target).attr("href")}else{if($(G.target).closest("a").length>0){window.location.href=$(G.target).closest("a").attr("href")}}}else{if(!x.interrupted&&x.zoom&&((Math.abs(z)<2&&Math.abs(C)<2)||x.isZoomed||E)){soysauce.stifle(s);x.toggleZoom(s,G,Math.abs(z),Math.abs(C))}else{if(Math.abs(z)<15||(x.interrupted&&Math.abs(z)<25)){if(x.looping){return}soysauce.stifle(s);x.ready=true;x.container.attr("data-ss-state","ready");x.gotoPos(x.offset,true,false,true)}else{if(Math.abs(z)>3&&x.swipe){x.ready=true;x.container.attr("data-ss-state","ready");if(x.lockScroll==="y"){return}if(z>0){if(!x.infinite&&((x.index===x.numChildren-1)||(x.multi&&x.index===x.maxIndex-Math.floor(x.multiVars.numItems/x.multiVars.stepSize)))){if(x.multi){if(x.index===x.maxIndex-1){x.gotoPos(x.offset)}else{x.gotoPos(x.index*-x.itemWidth*x.multiVars.stepSize+x.peekWidth)}}else{x.gotoPos(x.index*-x.itemWidth+x.peekWidth)}}else{if(soysauce.vars.degrade){x.rewindCoord=parseInt(x.container.css("left"),10)}x.slideForward(A)}}else{if(!x.infinite&&x.index===0){x.gotoPos(x.peekWidth)}else{if(soysauce.vars.degrade){x.rewindCoord=parseInt(x.container.css("left"),10)}x.slideBackward(A)}}}}}}})};g.prototype.checkPanLimits=function(){if(Math.abs(this.panCoords.x)>this.panMax.x&&this.panCoords.x>0){this.panCoords.x=this.panMax.x}else{if(Math.abs(this.panCoords.x)>this.panMax.x&&this.panCoords.x<0){this.panCoords.x=-this.panMax.x}}if(Math.abs(this.panCoords.y)>this.panMax.y&&this.panCoords.y>0){this.panCoords.y=this.panMax.y}else{if(Math.abs(this.panCoords.y)>this.panMax.y&&this.panCoords.y<0){this.panCoords.y=-this.panMax.y}}if(this.isZoomed){var l=this.items[this.index];if(!/img/i.test(l.tagName)){l=$(l).find("img")[0]}$(l).attr("data-ss-state","panning");f(l,this.scale,this.panCoords.x,this.panCoords.y)}};g.prototype.toggleZoom=function(s,r,q,o){if(!this.ready&&!(this.isZoomed&&q<2&&o<2)||(s.type.match(/touch/)!==null&&r.type.match(/mouse/)!==null)){soysauce.stifle(s);soysauce.stifle(r);return}var p=this.items[this.index];p=(!/img/i.test(p.tagName))?$(p).find("img")[0]:p;var t=this;$(p).attr("data-ss-state","ready");if(!this.isZoomed){var m=0,l=$(r.target).attr("data-ss-component"),n=($(p).attr("data-ss-zoom-src")!==undefined);if(n){p.src=$(p).attr("data-ss-zoom-src");$(p).removeAttr("data-ss-zoom-src");$(this.items[this.index]).append("<div data-ss-component='loading'>Loading...</div>");$(this.items[this.index]).find("[data-ss-component='loading']").css({position:"absolute","z-index":"7",top:"50%",left:"50%",margin:"-10px -10px -5px -40px",padding:"5px 10px",background:"rgba(0,0,0,0.3)",color:"white",border:"1px solid #777"})}$(p).imagesLoaded(function(){if(n){$(t.items[t.index]).find("[data-ss-component='loading']").hide()}if(/^zoom_icon$/.test(l)){t.panCoords={x:0,y:0};t.panCoordsStart={x:0,y:0}}else{var u=t.container.find("[data-ss-component='item']").height()/2;t.panCoords=soysauce.getCoords(r);t.panCoords.x-=t.itemWidth/2;t.panCoords.x*=-t.scale;t.panCoords.y=(r.originalEvent.changedTouches&&r.originalEvent.changedTouches.length)?r.originalEvent.changedTouches[0].pageY:r.originalEvent.pageY;m=t.panCoords.y-((r.originalEvent.changedTouches&&r.originalEvent.changedTouches.length)?r.originalEvent.changedTouches[0].target.y:r.originalEvent.target.y);if(m<(t.container.find("[data-ss-component='item']").height()/2)){m=Math.abs(m-u)}else{m=u-m}t.panCoords.y=m;t.checkPanLimits();t.panCoordsStart.x=t.panCoords.x;t.panCoordsStart.y=t.panCoords.y}if(!isNaN(t.panCoords.x)&&!isNaN(t.panCoords.y)){t.dots.first().parent().css("visibility","hidden");t.nextBtn.hide();t.prevBtn.hide();t.isZooming=true;t.ready=false;t.widget.attr("data-ss-state","zoomed");t.zoomIcon.attr("data-ss-state","in");t.scale=c;t.initPanLimits();if(t.peek&&/left/.test(t.peekAlign)){$(p).css({position:"relative",left:t.peekWidth+"px"})}f(p,t.scale,t.panCoords.x,t.panCoords.y);$(p).on(k,function(){t.isZoomed=true;t.isZooming=false})}})}else{if(q<2&&o<2){this.dots.first().parent().css("visibility","visible");this.nextBtn.show();this.prevBtn.show();this.isZooming=true;this.ready=false;this.widget.attr("data-ss-state","ready");this.zoomIcon.attr("data-ss-state","out");this.scale=1;this.widget.off("touchmove mousemove");if(t.peek&&/left/.test(t.peekAlign)){$(p).css({left:"0px"})}f(p,this.scale,0,0);$(p).on(k,function(){t.isZoomed=false;t.isZooming=false})}}$(p).on(k,function(){t.ready=true;t.interrupted=false;t.isZooming=false})};g.prototype.autoscrollOn=function(){var l=this;if(!this.autoscrollID){this.autoscrollID=window.setInterval(function(){if(soysauce.vars.degrade){l.rewindCoord=-l.itemWidth*3-l.peekWidth}l.slideForward()},l.autoscrollInterval);return true}return false};g.prototype.autoscrollOff=function(){var l=this;if(!this.autoscrollID){return false}window.clearInterval(l.autoscrollID);this.autoscrollID=undefined;return true};g.prototype.handleFreeze=function(){this.freeze=true};g.prototype.handleUnfreeze=function(){this.freeze=false};g.prototype.jumpTo=function(p,m){var o=this;if(p===this.index){return false}if(this.infinite){if(p<1||p>this.maxIndex){return false}}else{if(p<0||p>this.maxIndex-1){return false}}this.jumping=true;this.ready=false;var q=p*-this.itemWidth+this.peekWidth;if(this.infinite){$(this.items[this.index]).attr("data-ss-state","inactive");$(this.items[p]).attr("data-ss-state","active");$(this.dots[this.index-1]).attr("data-ss-state","inactive");$(this.dots[p-1]).attr("data-ss-state","active")}else{$(this.items[this.index]).attr("data-ss-state","inactive");$(this.items[p]).attr("data-ss-state","active");$(this.dots[this.index]).attr("data-ss-state","inactive");$(this.dots[p]).attr("data-ss-state","active")}if(this.fade){this.index=p;return true}if(this.autoheight){var n=$(this.items[p]).outerHeight(true);this.widget.height(n)}if(this.isZoomed){var l=this.items[this.index];l=(!/img/i.test(l.tagName))?$(l).find("img")[0]:l;this.dots.first().parent().css("visibility","visible");this.nextBtn.show();this.prevBtn.show();this.isZooming=true;this.ready=false;this.widget.attr("data-ss-state","ready");this.zoomIcon.attr("data-ss-state","out");if(m){this.isZoomed=false;this.isZooming=false;$(l).attr("data-ss-state","notransition")}else{$(l).one(k,function(){o.isZoomed=false;o.isZooming=false})}f(l,1,0,0)}this.gotoPos(q,false,true);this.index=p;return true};function e(m,l,n){l=l||0;n=n||0;if(soysauce.vars.degrade){m.style.left=l+"px"}else{m.style.webkitTransform=m.style.msTransform=m.style.OTransform=m.style.MozTransform=m.style.transform="translate3d("+l+"px,"+n+"px,0)"}}function f(m,n,l,o){l=l||0;o=o||0;n=n||c;m.style.webkitTransform=m.style.msTransform=m.style.OTransform=m.style.MozTransform=m.style.transform="matrix("+n+",0,0,"+n+","+l+","+o+")"}function a(p,o){var n=p.container.find("[data-ss-component='item']");var m,l;if(o>p.maxIndex){return}p.cloneDepth=o;m=n.slice(0,o).clone();l=n.slice(p.maxIndex-o,p.maxIndex).clone();m.appendTo(p.container);l.prependTo(p.container)}return{init:function(l){return new g(l)}}})();soysauce.inputClear=(function(){function a(b){var d=soysauce.getOptions(b),c=this,e=false;this.widget=$(b);this.icon;this.widget.on("focus keyup",function(){c.handleIcon()});this.widget.on("blur",function(){if(e){return}c.widget.attr("data-ss-clear","off")});this.widget.wrap("<div data-ss-component='input-wrapper'></div>");this.widget.parent().css({display:c.widget.css("display"),width:c.widget.css("width")});this.widget.attr("data-ss-clear","off");this.widget.after("<span data-ss-component='icon'></span>");this.icon=this.widget.find("+ [data-ss-component='icon']");this.icon.on("mousedown touchstart",function(){e=true;c.icon.one("mouseup touchend",function(){c.clear();e=false})})}a.prototype.clear=function(){this.widget.val("").attr("data-ss-clear","off")};a.prototype.handleIcon=function(){this.widget.attr("data-ss-clear",(!this.widget.val().length)?"off":"on")};return{init:function(b){return new a(b)}}})();soysauce.lazyloader=(function(){var b=100;var d=$(window);var c=800;function a(e){var g=soysauce.getOptions(e);var f=this;this.widget=$(e);this.items=this.widget.find("[data-ss-component='item']");this.threshold=parseInt(this.widget.attr("data-ss-threshold"),10)||c;this.timeStamp=0;this.initialLoad=parseInt(this.widget.attr("data-ss-initial-load"),10)||10;this.initialBatchLoaded=false;this.batchSize=parseInt(this.widget.attr("data-ss-batch-size"),10)||5;this.processing=false;this.button=this.widget.find("[data-ss-component='button']");this.complete=(this.items.length)?false:true;this.autoload=false;this.cache=false;this.cacheInput=$("[data-ss-component='cache']");this.isCached=false;this.hover=false;this.continueProcessing=false;if(g){g.forEach(function(k){switch(k){case"autoload":f.autoload=true;break;case"cache":if(!f.cacheInput.length){console.warn("Soysauce: Cache input not found.")}else{f.cache=true;f.isCached=(parseInt(f.cacheInput.val(),10)===1)?true:false}break;case"hover":f.hover=true;f.autoload=true;break}})}if(this.cache){var h=false;if(this.isCached){this.widget.one("SSWidgetReady",function(){d.trigger("scroll");f.widget.trigger("SSLoadState");h=true})}else{this.cacheInput.val(1)}d.one("beforeunload unload pagehide",function(k){h=false;f.widget.trigger("SSSaveState")});d.on("pageshow",function(k){if(!k.originalEvent.persisted||h){return}$(document).ready(function(){d.trigger("scroll");f.widget.trigger("SSLoadState")})})}this.processNextBatch(this.initialLoad);if(this.button.length){this.button.on("click",function(){f.processNextBatch()})}if(this.autoload){d.scroll(function(k){if(f.processing||f.complete){return}j(k)})}function j(l){if((f.hover&&f.continueProcessing)||(l.timeStamp-f.timeStamp)>b){var m=f.widget.height()+f.widget.offset().top-f.threshold;var k=d.scrollTop()+d.height();f.timeStamp=l.timeStamp;if((f.hover&&f.continueProcessing)||(k>m)&&Math.abs(l.timeStamp-soysauce.browserInfo.pageLoad)>1500){if(f.hover){if(f.items.length&&(k>f.items.first().offset().top)){f.continueProcessing=true;f.widget.one("SSBatchLoaded",function(){d.trigger("scroll")});f.processNextBatch()}else{f.continueProcessing=false}}else{f.processNextBatch()}}}}}a.prototype.processNextBatch=function(f){var f=f||this.batchSize,h=$(this.items.splice(0,f)),e=this,g=0;if(this.processing||this.complete){return}this.processing=true;this.widget.trigger("SSBatchStart");if(h.length===0){this.processing=false;this.complete=true;this.continueProcessing=false;this.widget.trigger("SSItemsEmpty")}else{h.each(function(k,l){var j=$(l);j.find("[data-ss-ll-src]").each(function(){soysauce.lateload(this)});j.imagesLoaded(function(m){j.attr("data-ss-state","loaded");if(++g===h.length){e.processing=false;e.widget.trigger("SSBatchLoaded");if(e.hover&&e.items.length&&e.initialBatchLoaded){e.calcHoverThreshold()}if(!e.items.length){e.complete=true;e.continueProcessing=false;e.widget.trigger("SSItemsEmpty")}else{if(!e.initialBatchLoaded){e.initialBatchLoaded=true;if(e.hover){e.calcHoverThreshold()}}}}})})}};a.prototype.calcHoverThreshold=function(){if(!this.hover||!this.items.length){return}this.threshold=this.widget.height()+this.widget.offset().top-this.items.first().offset().top;this.threshold=(this.threshold<c)?c:this.threshold};a.prototype.reload=function(e){this.items=this.widget.find("[data-ss-component='item']:not([data-ss-state])");if(this.items.length){this.complete=false;if(e!==false){this.processNextBatch()}}};a.prototype.handleResize=function(){if(!this.hover){return}this.calcHoverThreshold()};return{init:function(e){return new a(e)}}})();soysauce.togglers=(function(){var b="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";function a(f,q){var p=this;var r=soysauce.getOptions(f);if(q){var k=$(f);var h=k.attr("data-ss-toggler-id");var m="[data-ss-toggler-id='"+h+"']";this.orphan=true;this.widget=$(m);this.widget.each(function(t,s){var u=$(s).attr("data-ss-component");switch(u){case"button":p.button=$(s);break;case"content":p.content=$(s);break}});if(!this.content){console.warn("Soysauce: No content found for toggler-id '"+h+"'. Toggler may not work.");return}this.button.click(function(s){p.toggle(null,s)});this.setState("closed");this.content.attr("data-ss-id",k.attr("data-ss-id"))}else{this.widget=$(f);this.orphan=false;this.allButtons=this.widget.find("> [data-ss-component='button']");this.button=this.allButtons.first();this.allContent=this.widget.find("> [data-ss-component='content']");this.content=this.allContent.first()}this.parentID=0;this.tabID;this.state="closed";this.isChildToggler=false;this.hasTogglers=false;this.parent=undefined;this.ready=true;this.adjustFlag=false;this.freeze=false;this.opened=false;this.slide=false;this.height=0;this.prevChildHeight=0;this.ajax=false;this.ajaxData;this.ajaxing=false;this.ajaxOnLoad=false;this.tab=false;this.childTabOpen=false;this.nocollapse=false;this.responsive=false;this.responsiveVars={threshold:parseInt(this.widget.attr("data-ss-responsive-threshold"),10)||768,accordions:true};if(r){r.forEach(function(s){switch(s){case"ajax":p.ajax=true;p.ajaxOnLoad=/true/.test(p.widget.attr("data-ss-ajax-onload"));break;case"tabs":p.tab=true;break;case"nocollapse":p.nocollapse=true;break;case"slide":p.slide=(soysauce.vars.degrade)?false:true;break;case"responsive":p.responsive=true;p.tab=true;break}})}if(this.orphan){this.content.on(b,function(){p.content.trigger("slideEnd");p.ready=true});return this}this.allButtons.append("<span class='icon'></span>");this.allContent.wrapInner("<div data-ss-component='wrapper'/>");this.hasTogglers=(this.widget.has("[data-ss-widget='toggler']").length>0)?true:false;this.isChildToggler=(this.widget.parents("[data-ss-widget='toggler']").length>0)?true:false;if(this.isChildToggler){var n=this.widget.parents("[data-ss-widget='toggler']");this.parentID=parseInt(n.attr("data-ss-id"),10);this.parent=soysauce.fetch(this.parentID)}if(this.widget.attr("data-ss-state")!==undefined&&this.widget.attr("data-ss-state")==="open"){this.allButtons.each(function(){var s=$(this);if(!s.attr("data-ss-state")){s.attr("data-ss-state","closed");s.find("+ [data-ss-component='content']").attr("data-ss-state","closed")}else{if(s.attr("data-ss-state")==="open"){this.button=s;this.content=s.find("+ [data-ss-component='content']")}}});this.opened=true}else{this.allButtons.attr("data-ss-state","closed");this.allContent.attr("data-ss-state","closed");this.widget.attr("data-ss-state","closed");this.opened=false}if(this.slide){this.allContent.attr("data-ss-state","open");if(this.hasTogglers){this.allContent.each(function(){var s=$(this);s.imagesLoaded(function(){var t;s.find("[data-ss-component='content']").attr("data-ss-state","closed");t=s.outerHeight(true);p.height=t;s.attr("data-ss-slide-height",t);s.css("height","0px");s.attr("data-ss-state","closed");s.find("[data-ss-component='content']").removeAttr("data-ss-state")})})}else{this.allContent.each(function(){var s=$(this);s.imagesLoaded(function(){s.attr("data-ss-slide-height",s.outerHeight(true));s.css("height","0px");s.attr("data-ss-state","closed")})})}this.allContent.on(b,function(){if(!p.orphan){p.widget.trigger("slideEnd")}p.ready=true})}this.allButtons.click(function(s){p.toggle(null,s)});if(this.responsive){this.handleResponsive()}if(this.ajax){var g=this.widget;var l=this.widget.find("> [data-ss-component='content'][data-ss-ajax-url]");var e;var d="";var o;var p=this;var c=false;if(l.length===0){console.warn("Soysauce: 'data-ss-ajax-url' tag required on content. Must be on the same domain if site doesn't support CORS.");return}l.each(function(t,s){e=$(s.previousElementSibling);if(p.ajaxOnLoad){g.on("SSWidgetReady",function(){j(p,s)})}else{e.click(function(){j(p,s)})}});function j(t,s){d=$(s).attr("data-ss-ajax-url");t.setState("ajaxing");t.ready=false;t.ajaxing=true;t.ajaxData=soysauce.ajax(d);t.setAjaxComplete()}}if(this.tab&&this.nocollapse){this.content.imagesLoaded(function(){p.widget.css("min-height",p.button.outerHeight(true)+p.content.outerHeight(true))})}}a.prototype.open=function(){var e=this.responsiveVars.accordions;if(!this.ready&&!e){return}var c=this;var d=0;if(this.slide){if(this.responsive&&!e){return}this.ready=false;if(this.adjustFlag||e){this.content.one(b,function(){c.adjustHeight()})}if(this.isChildToggler&&this.parent.slide){if(this.tab){this.parent.setHeight(this.parent.height+this.height-this.parent.prevChildHeight)}else{this.parent.addHeight(this.height)}this.parent.prevChildHeight=this.height}if(this.ajax&&this.height===0){$(this.content).imagesLoaded(function(){c.content.css("height","auto");c.height=c.content.outerHeight(true);c.content.css("height",c.height+"px")})}else{c.height=parseInt(c.content.attr("data-ss-slide-height"),10);c.content.css("height",c.height+"px")}}if(this.tab&&this.nocollapse){this.widget.css("min-height",this.button.outerHeight(true)+this.content.outerHeight(true))}this.opened=true;this.setState("open")};a.prototype.close=function(d){var c=this;if(!this.ready){return}if(this.slide){this.ready=false;if(this.isChildToggler&&this.parent.slide&&d){this.parent.addHeight(-this.height)}this.content.css("height","0px")}this.setState("closed")};a.prototype.doResize=function(){this.adjustFlag=true;if(this.opened){this.adjustHeight()}if(this.responsive){this.handleResponsive()}};a.prototype.handleResize=function(){var d=this;if(this.defer){var c=this.allContent.find("[data-ss-widget]");this.allContent.css({clear:"both",position:"relative"});if(!c.length){this.doResize()}else{c.each(function(f,h){var g=soysauce.fetch(h).widget;if((f+1)!==c.length){return}g.one("SSWidgetResized",function(){d.allContent.css({clear:"",position:"",display:""});d.doResize()})})}}else{this.doResize()}};a.prototype.adjustHeight=function(){if(!this.slide){if(this.tab&&this.nocollapse){this.widget.css("min-height",this.button.outerHeight(true)+this.content.outerHeight(true))}return}if(this.opened){this.height=this.content.find("> [data-ss-component='wrapper']").outerHeight(true);this.content.attr("data-ss-slide-height",this.height).height(this.height)}};a.prototype.addHeight=function(c){this.height+=c;this.height=(this.height<0)?0:this.height;if(this.slide){this.content.attr("data-ss-slide-height",this.height)}this.content.css("height",this.height+"px")};a.prototype.setHeight=function(c){this.height=c;this.height=(this.height<0)?0:this.height;if(this.slide){this.content.attr("data-ss-slide-height",this.height)}this.content.css("height",this.height+"px")};a.prototype.toggle=function(f,h){var d=this;var g;if(this.freeze||this.ajaxing){return}if(h){g=h.target}else{if(f&&!this.orphan){if(typeof(f)==="string"){g=f=this.widget.find(f)[0]}try{if(/content/.test(f.attributes["data-ss-component"].value)){var c=this.widget.find(f);g=f.previousElementSibling}}catch(h){console.warn("Soysauce: component passed is not a Soysauce component. Opening first toggler.");g=this.button[0]}}else{g=this.button[0];if(g&&!g.attributes["data-ss-component"]){console.warn("Soysauce: component passed is not a Soysauce component. Opening first toggler.")}}}if(!$(g).attr("data-ss-component")){g=$(g).closest("[data-ss-component='button']")[0]}if(this.orphan){if(this.opened){this.opened=false;this.setState("closed")}else{this.opened=true;this.setState("open")}return}if(this.tab){var j=(this.button.attr("data-ss-state")==="open"&&this.button[0]===g)?true:false;if((this.responsive&&!this.responsiveVars.accordions||this.nocollapse)&&(this.button[0]===g)){return}if(this.isChildToggler&&this.tab){this.parent.childTabOpen=!j;if(j){this.parent.prevChildHeight=0}}this.close(j);this.button=$(g);this.content=$(g).find("+ [data-ss-component='content']");if(this.slide){d.height=parseInt(d.content.attr("data-ss-slide-height"),10)}if(j){this.widget.attr("data-ss-state","closed");this.opened=false;return}this.open()}else{this.button=$(g);this.content=$(g).find("+ [data-ss-component='content']");var j=(this.button.attr("data-ss-state")==="open"&&this.widget.find("[data-ss-component='button'][data-ss-state='open']").length===1)?true:false;if(j){this.opened=false}(this.button.attr("data-ss-state")==="closed")?this.open():this.close()}};a.prototype.setState=function(c){this.state=c;this.button.attr("data-ss-state",c);this.content.attr("data-ss-state",c);if(this.orphan){return}if(this.opened){this.widget.attr("data-ss-state","open")}else{this.widget.attr("data-ss-state","closed")}if(this.responsive&&this.opened){this.handleResponsive()}};a.prototype.setAjaxComplete=function(){this.ajaxing=false;this.ready=true;if(this.opened){this.setState("open")}else{this.setState("closed")}this.widget.trigger("SSAjaxComplete")};a.prototype.handleFreeze=function(){this.freeze=true};a.prototype.handleUnfreeze=function(){this.freeze=false};a.prototype.handleResponsive=function(){if(!this.responsive){return}if(window.innerWidth>=this.responsiveVars.threshold){this.responsiveVars.accordions=false;this.widget.attr("data-ss-responsive-type","tabs");if(!this.opened){this.button=this.widget.find("[data-ss-component='button']").first();this.content=this.widget.find("[data-ss-component='content']").first();this.open()}this.widget.css("min-height",this.button.outerHeight(true)+this.content.outerHeight(true)+"px")}else{this.responsiveVars.accordions=true;this.widget.attr("data-ss-responsive-type","accordions");this.widget.css("min-height","0")}};return{init:function(c,d){return new a(c,d)}}})();